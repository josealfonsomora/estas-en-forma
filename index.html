<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Timer Pistola Estándar</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
  #timer { font-size: 48px; margin-bottom: 20px; }
  #phase { font-size: 24px; margin-bottom: 20px; }
</style>
</head>
<body>

<div id="phase">Preparado para iniciar</div>
<div id="timer">00:00</div>
<button onclick="startTimer()">Iniciar</button>

<script>
let rounds = [
  {name: "Ronda 1: 150 segundos", duration: 150},
  {name: "Descanso 1: 60 segundos", duration: 60},
  {name: "Ronda 2: 20 segundos", duration: 20},
  {name: "Descanso 2: 60 segundos", duration: 60},
  {name: "Ronda 3: 10 segundos", duration: 10},
];
let currentPhase = 0;
let timerInterval;

function startTimer() {
  if(timerInterval) return; // evitar múltiples inicios
  nextPhase();
}

function nextPhase() {
  if (currentPhase >= rounds.length) {
    document.getElementById("phase").textContent = "Entrenamiento completado";
    document.getElementById("timer").textContent = "00:00";
    timerInterval = null;
    return;
  }
  let phase = rounds[currentPhase];
  let timeLeft = phase.duration;
  document.getElementById("phase").textContent = phase.name;
  updateTimerDisplay(timeLeft);

  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerDisplay(timeLeft);
    if(timeLeft <= 0) {
      clearInterval(timerInterval);
      timerInterval = null;
      currentPhase++;
      setTimeout(nextPhase, 1000);
    }
  }, 1000);
}

function updateTimerDisplay(seconds) {
  let min = Math.floor(seconds / 60);
  let sec = seconds % 60;
  document.getElementById("timer").textContent = 
    (min < 10 ? "0" + min : min) + ":" + (sec < 10 ? "0" + sec : sec);
}
</script>

</body>
</html>
